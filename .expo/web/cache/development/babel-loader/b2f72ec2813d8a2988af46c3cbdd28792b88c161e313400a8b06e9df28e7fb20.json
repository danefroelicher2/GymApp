{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { followService } from \"../services/supabase\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function FollowButton(_ref) {\n  var targetUserId = _ref.targetUserId,\n    onFollowChange = _ref.onFollowChange,\n    style = _ref.style;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isFollowing = _useState2[0],\n    setIsFollowing = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = useState(true),\n    _useState6 = _slicedToArray(_useState5, 2),\n    checkingStatus = _useState6[0],\n    setCheckingStatus = _useState6[1];\n  var _useAuth = useAuth(),\n    user = _useAuth.user;\n  useEffect(function () {\n    checkFollowStatus();\n  }, [targetUserId, user]);\n  var checkFollowStatus = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      if (!user || user.id === targetUserId) {\n        setCheckingStatus(false);\n        return;\n      }\n      try {\n        var _yield$followService$ = yield followService.isFollowing(targetUserId),\n          following = _yield$followService$.isFollowing,\n          error = _yield$followService$.error;\n        if (error) {\n          console.error('Error checking follow status:', error);\n        } else {\n          setIsFollowing(following);\n        }\n      } catch (error) {\n        console.error('Error checking follow status:', error);\n      } finally {\n        setCheckingStatus(false);\n      }\n    });\n    return function checkFollowStatus() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var handleToggleFollow = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      if (!user || loading) return;\n      setLoading(true);\n      try {\n        var error;\n        if (isFollowing) {\n          var _yield$followService$2 = yield followService.unfollowUser(targetUserId);\n          error = _yield$followService$2.error;\n        } else {\n          var _yield$followService$3 = yield followService.followUser(targetUserId);\n          error = _yield$followService$3.error;\n        }\n        if (error) {\n          Alert.alert('Error', 'Failed to update follow status');\n          console.error('Follow toggle error:', error);\n          return;\n        }\n        var newFollowingStatus = !isFollowing;\n        setIsFollowing(newFollowingStatus);\n        onFollowChange == null ? void 0 : onFollowChange(newFollowingStatus);\n      } catch (error) {\n        console.error('Follow toggle error:', error);\n        Alert.alert('Error', 'Failed to update follow status');\n      } finally {\n        setLoading(false);\n      }\n    });\n    return function handleToggleFollow() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  if (checkingStatus || !user || user.id === targetUserId) {\n    return null;\n  }\n  return _jsx(TouchableOpacity, {\n    style: [styles.button, isFollowing ? styles.followingButton : styles.followButton, style],\n    onPress: handleToggleFollow,\n    disabled: loading,\n    children: loading ? _jsx(ActivityIndicator, {\n      size: \"small\",\n      color: isFollowing ? \"#666\" : \"white\"\n    }) : _jsx(Text, {\n      style: [styles.buttonText, isFollowing ? styles.followingText : styles.followText],\n      children: isFollowing ? 'Following' : 'Follow'\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  button: {\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 6,\n    minWidth: 80,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  followButton: {\n    backgroundColor: '#007AFF'\n  },\n  followingButton: {\n    backgroundColor: '#f0f0f0',\n    borderWidth: 1,\n    borderColor: '#ddd'\n  },\n  buttonText: {\n    fontSize: 14,\n    fontWeight: '600'\n  },\n  followText: {\n    color: 'white'\n  },\n  followingText: {\n    color: '#666'\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","TouchableOpacity","Text","StyleSheet","ActivityIndicator","Alert","followService","useAuth","jsx","_jsx","FollowButton","_ref","targetUserId","onFollowChange","style","_useState","_useState2","_slicedToArray","isFollowing","setIsFollowing","_useState3","_useState4","loading","setLoading","_useState5","_useState6","checkingStatus","setCheckingStatus","_useAuth","user","checkFollowStatus","_ref2","_asyncToGenerator","id","_yield$followService$","following","error","console","apply","arguments","handleToggleFollow","_ref3","_yield$followService$2","unfollowUser","_yield$followService$3","followUser","alert","newFollowingStatus","styles","button","followingButton","followButton","onPress","disabled","children","size","color","buttonText","followingText","followText","create","paddingHorizontal","paddingVertical","borderRadius","minWidth","alignItems","justifyContent","backgroundColor","borderWidth","borderColor","fontSize","fontWeight"],"sources":["C:/Users/froel/Downloads/Programming Projects/GymApp/src/components/FollowButton.tsx"],"sourcesContent":["// src/components/FollowButton.tsx\r\nimport React, { useState, useEffect } from 'react';\r\nimport {\r\n  TouchableOpacity,\r\n  Text,\r\n  StyleSheet,\r\n  ActivityIndicator,\r\n  Alert,\r\n} from 'react-native';\r\nimport { followService } from '../services/supabase';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\ninterface FollowButtonProps {\r\n  targetUserId: string;\r\n  onFollowChange?: (isFollowing: boolean) => void;\r\n  style?: any;\r\n}\r\n\r\nexport default function FollowButton({ \r\n  targetUserId, \r\n  onFollowChange,\r\n  style \r\n}: FollowButtonProps) {\r\n  const [isFollowing, setIsFollowing] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [checkingStatus, setCheckingStatus] = useState(true);\r\n  const { user } = useAuth();\r\n\r\n  useEffect(() => {\r\n    checkFollowStatus();\r\n  }, [targetUserId, user]);\r\n\r\n  const checkFollowStatus = async () => {\r\n    if (!user || user.id === targetUserId) {\r\n      setCheckingStatus(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const { isFollowing: following, error } = await followService.isFollowing(targetUserId);\r\n      \r\n      if (error) {\r\n        console.error('Error checking follow status:', error);\r\n      } else {\r\n        setIsFollowing(following);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error checking follow status:', error);\r\n    } finally {\r\n      setCheckingStatus(false);\r\n    }\r\n  };\r\n\r\n  const handleToggleFollow = async () => {\r\n    if (!user || loading) return;\r\n\r\n    setLoading(true);\r\n    try {\r\n      let error;\r\n      \r\n      if (isFollowing) {\r\n        ({ error } = await followService.unfollowUser(targetUserId));\r\n      } else {\r\n        ({ error } = await followService.followUser(targetUserId));\r\n      }\r\n\r\n      if (error) {\r\n        Alert.alert('Error', 'Failed to update follow status');\r\n        console.error('Follow toggle error:', error);\r\n        return;\r\n      }\r\n\r\n      const newFollowingStatus = !isFollowing;\r\n      setIsFollowing(newFollowingStatus);\r\n      onFollowChange?.(newFollowingStatus);\r\n      \r\n    } catch (error) {\r\n      console.error('Follow toggle error:', error);\r\n      Alert.alert('Error', 'Failed to update follow status');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Don't render if checking status or if it's the user's own profile\r\n  if (checkingStatus || !user || user.id === targetUserId) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <TouchableOpacity\r\n      style={[\r\n        styles.button,\r\n        isFollowing ? styles.followingButton : styles.followButton,\r\n        style,\r\n      ]}\r\n      onPress={handleToggleFollow}\r\n      disabled={loading}\r\n    >\r\n      {loading ? (\r\n        <ActivityIndicator \r\n          size=\"small\" \r\n          color={isFollowing ? \"#666\" : \"white\"} \r\n        />\r\n      ) : (\r\n        <Text \r\n          style={[\r\n            styles.buttonText,\r\n            isFollowing ? styles.followingText : styles.followText,\r\n          ]}\r\n        >\r\n          {isFollowing ? 'Following' : 'Follow'}\r\n        </Text>\r\n      )}\r\n    </TouchableOpacity>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  button: {\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 8,\r\n    borderRadius: 6,\r\n    minWidth: 80,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  followButton: {\r\n    backgroundColor: '#007AFF',\r\n  },\r\n  followingButton: {\r\n    backgroundColor: '#f0f0f0',\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n  },\r\n  buttonText: {\r\n    fontSize: 14,\r\n    fontWeight: '600',\r\n  },\r\n  followText: {\r\n    color: 'white',\r\n  },\r\n  followingText: {\r\n    color: '#666',\r\n  },\r\n});"],"mappings":";;AACA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAAC,OAAAC,gBAAA;AAAA,OAAAC,IAAA;AAAA,OAAAC,UAAA;AAAA,OAAAC,iBAAA;AAAA,OAAAC,KAAA;AAQnD,SAASC,aAAa;AACtB,SAASC,OAAO;AAAkC,SAAAC,GAAA,IAAAC,IAAA;AAQlD,eAAe,SAASC,YAAYA,CAAAC,IAAA,EAId;EAAA,IAHpBC,YAAY,GAAAD,IAAA,CAAZC,YAAY;IACZC,cAAc,GAAAF,IAAA,CAAdE,cAAc;IACdC,KAAK,GAAAH,IAAA,CAALG,KAAK;EAEL,IAAAC,SAAA,GAAsChB,QAAQ,CAAC,KAAK,CAAC;IAAAiB,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA9CG,WAAW,GAAAF,UAAA;IAAEG,cAAc,GAAAH,UAAA;EAClC,IAAAI,UAAA,GAA8BrB,QAAQ,CAAC,KAAK,CAAC;IAAAsB,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAAtCE,OAAO,GAAAD,UAAA;IAAEE,UAAU,GAAAF,UAAA;EAC1B,IAAAG,UAAA,GAA4CzB,QAAQ,CAAC,IAAI,CAAC;IAAA0B,UAAA,GAAAR,cAAA,CAAAO,UAAA;IAAnDE,cAAc,GAAAD,UAAA;IAAEE,iBAAiB,GAAAF,UAAA;EACxC,IAAAG,QAAA,GAAiBrB,OAAO,CAAC,CAAC;IAAlBsB,IAAI,GAAAD,QAAA,CAAJC,IAAI;EAEZ7B,SAAS,CAAC,YAAM;IACd8B,iBAAiB,CAAC,CAAC;EACrB,CAAC,EAAE,CAAClB,YAAY,EAAEiB,IAAI,CAAC,CAAC;EAExB,IAAMC,iBAAiB;IAAA,IAAAC,KAAA,GAAAC,iBAAA,CAAG,aAAY;MACpC,IAAI,CAACH,IAAI,IAAIA,IAAI,CAACI,EAAE,KAAKrB,YAAY,EAAE;QACrCe,iBAAiB,CAAC,KAAK,CAAC;QACxB;MACF;MAEA,IAAI;QACF,IAAAO,qBAAA,SAAgD5B,aAAa,CAACY,WAAW,CAACN,YAAY,CAAC;UAAlEuB,SAAS,GAAAD,qBAAA,CAAtBhB,WAAW;UAAakB,KAAK,GAAAF,qBAAA,CAALE,KAAK;QAErC,IAAIA,KAAK,EAAE;UACTC,OAAO,CAACD,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;QACvD,CAAC,MAAM;UACLjB,cAAc,CAACgB,SAAS,CAAC;QAC3B;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;MACvD,CAAC,SAAS;QACRT,iBAAiB,CAAC,KAAK,CAAC;MAC1B;IACF,CAAC;IAAA,gBAnBKG,iBAAiBA,CAAA;MAAA,OAAAC,KAAA,CAAAO,KAAA,OAAAC,SAAA;IAAA;EAAA,GAmBtB;EAED,IAAMC,kBAAkB;IAAA,IAAAC,KAAA,GAAAT,iBAAA,CAAG,aAAY;MACrC,IAAI,CAACH,IAAI,IAAIP,OAAO,EAAE;MAEtBC,UAAU,CAAC,IAAI,CAAC;MAChB,IAAI;QACF,IAAIa,KAAK;QAET,IAAIlB,WAAW,EAAE;UAAA,IAAAwB,sBAAA,SACIpC,aAAa,CAACqC,YAAY,CAAC/B,YAAY,CAAC;UAAxDwB,KAAK,GAAAM,sBAAA,CAALN,KAAK;QACV,CAAC,MAAM;UAAA,IAAAQ,sBAAA,SACctC,aAAa,CAACuC,UAAU,CAACjC,YAAY,CAAC;UAAtDwB,KAAK,GAAAQ,sBAAA,CAALR,KAAK;QACV;QAEA,IAAIA,KAAK,EAAE;UACT/B,KAAK,CAACyC,KAAK,CAAC,OAAO,EAAE,gCAAgC,CAAC;UACtDT,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;UAC5C;QACF;QAEA,IAAMW,kBAAkB,GAAG,CAAC7B,WAAW;QACvCC,cAAc,CAAC4B,kBAAkB,CAAC;QAClClC,cAAc,oBAAdA,cAAc,CAAGkC,kBAAkB,CAAC;MAEtC,CAAC,CAAC,OAAOX,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;QAC5C/B,KAAK,CAACyC,KAAK,CAAC,OAAO,EAAE,gCAAgC,CAAC;MACxD,CAAC,SAAS;QACRvB,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IAAA,gBA7BKiB,kBAAkBA,CAAA;MAAA,OAAAC,KAAA,CAAAH,KAAA,OAAAC,SAAA;IAAA;EAAA,GA6BvB;EAGD,IAAIb,cAAc,IAAI,CAACG,IAAI,IAAIA,IAAI,CAACI,EAAE,KAAKrB,YAAY,EAAE;IACvD,OAAO,IAAI;EACb;EAEA,OACEH,IAAA,CAACR,gBAAgB;IACfa,KAAK,EAAE,CACLkC,MAAM,CAACC,MAAM,EACb/B,WAAW,GAAG8B,MAAM,CAACE,eAAe,GAAGF,MAAM,CAACG,YAAY,EAC1DrC,KAAK,CACL;IACFsC,OAAO,EAAEZ,kBAAmB;IAC5Ba,QAAQ,EAAE/B,OAAQ;IAAAgC,QAAA,EAEjBhC,OAAO,GACNb,IAAA,CAACL,iBAAiB;MAChBmD,IAAI,EAAC,OAAO;MACZC,KAAK,EAAEtC,WAAW,GAAG,MAAM,GAAG;IAAQ,CACvC,CAAC,GAEFT,IAAA,CAACP,IAAI;MACHY,KAAK,EAAE,CACLkC,MAAM,CAACS,UAAU,EACjBvC,WAAW,GAAG8B,MAAM,CAACU,aAAa,GAAGV,MAAM,CAACW,UAAU,CACtD;MAAAL,QAAA,EAEDpC,WAAW,GAAG,WAAW,GAAG;IAAQ,CACjC;EACP,CACe,CAAC;AAEvB;AAEA,IAAM8B,MAAM,GAAG7C,UAAU,CAACyD,MAAM,CAAC;EAC/BX,MAAM,EAAE;IACNY,iBAAiB,EAAE,EAAE;IACrBC,eAAe,EAAE,CAAC;IAClBC,YAAY,EAAE,CAAC;IACfC,QAAQ,EAAE,EAAE;IACZC,UAAU,EAAE,QAAQ;IACpBC,cAAc,EAAE;EAClB,CAAC;EACDf,YAAY,EAAE;IACZgB,eAAe,EAAE;EACnB,CAAC;EACDjB,eAAe,EAAE;IACfiB,eAAe,EAAE,SAAS;IAC1BC,WAAW,EAAE,CAAC;IACdC,WAAW,EAAE;EACf,CAAC;EACDZ,UAAU,EAAE;IACVa,QAAQ,EAAE,EAAE;IACZC,UAAU,EAAE;EACd,CAAC;EACDZ,UAAU,EAAE;IACVH,KAAK,EAAE;EACT,CAAC;EACDE,aAAa,EAAE;IACbF,KAAK,EAAE;EACT;AACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}